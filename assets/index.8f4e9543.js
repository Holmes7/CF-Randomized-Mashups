var x=Object.defineProperty;var N=(s,e,t)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(N(s,typeof e!="symbol"?e+"":e,t),t);import{j as r,a as l,R as S,r as u,b as C,c as w}from"./vendor.9ac0fb84.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};R();function P(){return r("h2",{className:"is-size-2 has-text-weight-semibold has-text-centered",children:"Random Mashup Generator"})}function I(){return r("h4",{className:"is-size-4 mx-3 has-text-centered",children:"This app helps you create a random codeforces mashup in which the problems aren't solved by any of the members in your group."})}function L(s,e){let t=[];for(let o=0;o<s.length;o++)t.push({rating:s[o],problem:e[o]});return t}function F(s){const{rating:e,problem:t}=s;function o(){navigator.clipboard.writeText(t)}return l("tr",{children:[r("td",{children:e}),r("td",{children:r("button",{className:"button is-primary is-outlined is-small",onClick:o,children:t})})]})}function j(s){let e=L(s.ratings,s.problems);return l("table",{className:"table is-fullwidth has-text-centered is-striped is-bordered ml-2",children:[r("thead",{children:l("tr",{children:[r("th",{children:"Rating"}),r("th",{children:"Problem Code"})]})}),r("tbody",{children:e.map((t,o)=>r(F,{rating:t.rating,problem:t.problem},o))})]})}function f(s){const{state:e,setState:t}=s,o=i=>{t(e.filter((a,c)=>c!==i))},n=i=>{t([...e,i])};return l("div",{className:"m-2",children:[r("div",{className:"label",children:s.label}),r(S.WithContext,{classNames:{tag:"tag is-warning is-medium m-1",tagInputField:"input",remove:"delete is-small"},tags:s.state,handleDelete:o,handleAddition:n,allowUnique:!1})]})}function O(s){return r("div",{className:"select m-2",children:l("select",{onChange:s.handleFirstContest,name:"firstContest",id:"",children:[r("option",{value:"1",children:"All Time"}),r("option",{value:"754",children:"Since 2017"}),r("option",{value:"1284",children:"Since 2020"}),r("option",{value:"1470",children:"Since 2021"}),r("option",{value:"-1",children:"Most Recent (Not Random)"})]})})}function A(s){const{users:e,setUsers:t,ratings:o,setRatings:n,setFirstContest:i}=s;function a(c){i(parseInt(c.target.value))}return l("div",{children:[l("div",{children:[r(f,{label:"Codeforces Usernames",state:e,setState:t}),r(f,{label:"Problem Ratings",state:o,setState:n})]}),r(O,{handleFirstContest:a})]})}async function p(s){const e=await fetch(s);if(e.ok){const t=await e.json();if(t.status=="OK")return t}throw"Could not fetch data from codeforces"}async function M(s){let e=new Set;return s.map(async t=>{(await T(t)).map(n=>{e.add(n)})}),e}async function T(s){const e=`https://codeforces.com/api/user.status?handle=${s}`,o=(await p(e)).result;let n=[];return o.map(i=>{n.push(i.problem.name)}),n}function U(s){s.sort(()=>Math.random()-.5)}function k(s,e){if(e==-1)return s;let t=[];for(let o of s){if(o.contestId<e){console.log(o.contestId);break}t.push(o)}return U(t),t}class H{constructor(e,t,o){d(this,"userList",[]);d(this,"ratings",[]);d(this,"firstContest",1);this.userList=t.map(n=>n.text),this.ratings=o.map(n=>parseInt(n.text)),this.firstContest=e}async getProblems(){return(await p("https://codeforces.com/api/problemset.problems")).result.problems}async create(){let e=await M(this.userList);const t=await this.getProblems(),o=k(t,this.firstContest);return this.ratings.map(i=>this.getFirstUnsolvedProblem(i,o,e))}getFirstUnsolvedProblem(e,t,o){for(let n of t)if(n.rating==e&&!o.has(n.name))return o.add(n.name),`${n.contestId}${n.index}`;return"No problem found"}}function E(){const[s,e]=u.exports.useState([{id:"2100",text:"2100"}]),[t,o]=u.exports.useState(["2000"]),[n,i]=u.exports.useState(["797E"]),[a,c]=u.exports.useState([{id:"Holmes7",text:"Holmes7"}]);u.exports.useEffect(()=>{const h=JSON.parse(localStorage.getItem("ratings")||'[{"id": "2100", "text": "2100"}]');e(h);const m=JSON.parse(localStorage.getItem("users")||'[{"id": "Holmes7", "text": "Holmes7"}]');c(m)},[]);const[g,b]=u.exports.useState(1);async function v(){const m=await new H(g,a,s).create();o(s.map(y=>y.text)),i(m),localStorage.setItem("ratings",JSON.stringify(s)),localStorage.setItem("users",JSON.stringify(a))}return l("div",{children:[r(A,{setFirstContest:b,users:a,setUsers:c,ratings:s,setRatings:e}),r("button",{type:"button",className:"button m-2 is-info is-outlined",onClick:v,children:"Generate Mashup"}),r(j,{ratings:t,problems:n})]})}function J(){return l("div",{children:[r(P,{}),r(I,{}),r(E,{})]})}function _(){return r("div",{className:"hero is-fullheight has-background-light",children:l("div",{className:"columns hero-head",children:[r("div",{className:"column"}),r("div",{className:"column is-two-fifths",children:r(J,{})}),r("div",{className:"column"})]})})}C.render(r(w.StrictMode,{children:r(_,{})}),document.getElementById("root"));
